# 第6章 OpenShift へのコンテナー化されたアプリケーションのデプロイ

## Kubernetes および OpenShift アーキテクチャの説明

#### Kubernetes と OpenShift

**Kubernetes** はコンテナー化されたアプリケーションのデプロイメント、管理、およびスケーリングを簡潔化するオーケストレーションサービスである。

Kubernetes を使用する主な利点の 1 つは、複数のノードを使用して管理対象アプリケーションの復元力とスケーラビリティーを確保していることです。Kubernetes はコンテナーを実行する一連のノードサーバーのクラスターを形成し、複数のマスターサーバーによって集中管理されています。

**Red Hat OpenShift Container Platform** は Red Hat CoreOS と Kubernetes 上に構築されたモジュール式のコンポーネントとサービスのセットです。

RHOCP は遠隔管理、高度なセキュリティー、監視と監査、アプリケーションライフサイクル管理、開発者向けのセルフサービスインターフェースなどの PaaS 機能も備えています。

#### Kubernetes のリソースタイプの説明

- Pod (po)

IP アドレスや永続的ストレージボリュームなどのリソースを共有するコンテナーの集合です。Pod は Kubernetes の基本的な作業単位です。 

- サービス (svc)

Pod プールへアクセスするための 1 つの IP とポートの組み合わせを定義します。デフォルトでは、サービスにおけるクライアントから Pod への接続はラウンドロビン形式で実施されます。 

- レプリケーションコントローラー (rc)

Pod を異なるノードに複製 (水平方向にスケーリング) する方法を定義する Kubernetes リソース。レプリケーションコントローラーは、Pod とコンテナーに高可用性を提供するための基本的な Kubernetes サービスです。 

- 永続ボリューム (pv)

Kubernetes Pod が使用するストレージエリアを定義します。 

- 永続ボリューム要求 (pvc)

Pod によるストレージの要求です。PVC は、通常コンテナーのファイルシステムにストレージをマウントすることによって、そのコンテナーが PV を利用できるように PV を Pod にリンクします。 

- ConfigMaps (cm) と Secrets

他のリソースが使用できるキーと値のセットが含まれています。ConfigMaps と Secrets は通常、複数のリソースで使用される設定値を一元管理するために使用されます。Secret は ConfigMap のマップと異なり、Secret の値は常にエンコードされ (暗号化されていない)、そのアクセス権は少数の認証されたユーザーに制限されています。 


#### OpenShift のリソースタイプ

openshiftによって、kubernetesに追加される主なリソース

- デプロイ設定 (dc)

Pod に含まれるコンテナーのセット、および使用されるデプロイ戦略を表します。dc は基本的であるが拡張可能な継続的提供ワークフローも提供します。 

- ビルド設定 (bc)

OpenShift プロジェクトで実行されるプロセスを定義します。Git リポジトリに保存されているアプリケーションソースコードからコンテナーイメージをビルドするために、OpenShift Source-to-Image (S2I) 機能によって使用されます。bc は dc と連携して基本的であるが拡張可能な継続的インテグレーションワークフローおよび継続的デリバリーワークフローを提供します。 

- ルート

OpenShift ルーターによって認識される DNS ホスト名であり、アプリケーションとマイクロサービスのエントリーポイントになります。 


#### ネットワーキング